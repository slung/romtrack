(function(a){google.load("visualization","1",{packages:["corechart"]});a(document).ready(function(){var b=new TRACKS.App({language:(TRACKS.queryStringParameter("language")==="en")?"en":"ro",state:(TRACKS.getUrlHash()&&TRACKS.getUrlHash().length>1)?TRACKS.App.States.SHARE:TRACKS.App.States.SEARCH,views:[new TRACKS.SearchView({searchRadius:40,countryCode:"ro",container:TRACKS.one("#search"),hideOnStates:[TRACKS.App.States.SHARE],templates:{main:a.trim(TRACKS.one("#search-tpl").innerHTML),suggestions:a.trim(TRACKS.one("#suggestions-tpl").innerHTML)},sendAnalytics:function(d,c){if(!d||!c){return;}ga("send","event","Search",d,c);}}),new TRACKS.MapView({container:TRACKS.one("#map"),renderContainer:TRACKS.one("#map"),hideOnStates:[],zoom:3,templates:{trackTooltipTemplate:a.trim(TRACKS.one("#track-tooltip-tpl").innerHTML),poiTooltipTemplate:a.trim(TRACKS.one("#poi-tooltip-tpl").innerHTML)},sendAnalytics:function(d,c){if(!d||!c){return;}ga("send","event","Map",d,c);}}),new TRACKS.ListView({container:TRACKS.one("#list"),renderContainer:TRACKS.one("#list #container"),hideOnStates:[TRACKS.App.States.SHARE],noTracksMsg:"Din păcate nu am găsit nimic în jurul locației căutate :(",templates:{main:a.trim(TRACKS.one("#list-tpl").innerHTML),empty:a.trim(TRACKS.one("#empty-list-tpl").innerHTML)},onReady:function(){a("#list #data").mCustomScrollbar({theme:"minimal-dark"});},sendAnalytics:function(d,c){if(!d||!c){return;}ga("send","event","List",d,c);}}),new TRACKS.ElevationProfileView({container:TRACKS.one("#elevation-profile"),renderContainer:TRACKS.one("#elevation-profile #container"),hideOnStates:[TRACKS.App.States.DEFAULT,TRACKS.App.States.SEARCH,TRACKS.App.States.SHARE],xAxisName:"Distanță (km)",yAxisName:"Altitudine (m)",templates:{main:a.trim(TRACKS.one("#elevation-profile-tpl").innerHTML)}}),new TRACKS.FiltersView({container:TRACKS.one("#filters"),renderContainer:TRACKS.one("#filters #container"),hideOnStates:[TRACKS.App.States.SHARE],templates:{main:a.trim(TRACKS.one("#filters-tpl").innerHTML)},sendAnalytics:function(d,c){if(!d||!c){return;}ga("send","event","Filters",d,c);}})],appReady:function(){TRACKS.mask(TRACKS.MASK_ELEMENT);TRACKS.poisLoaded=false;TRACKS.tracksLoaded=false;TRACKS.dispatcher.onMessage("poisLoaded",function(){TRACKS.poisLoaded=true;if(TRACKS.tracksLoaded){if(b.state===TRACKS.App.States.SHARE){var d=TRACKS.getUrlHash();if(d&&d.length>0){TRACKS.mask(TRACKS.MASK_ELEMENT);var e=d.substring(1,d.length);var c=TRACKS.DataManager.getInstance().getDataById(e);this.sendMessage("selectDataItemOnMap",c);TRACKS.unmask(TRACKS.MASK_ELEMENT);}}else{TRACKS.DataManager.getInstance().geolocateUser();}}});TRACKS.dispatcher.onMessage("tracksLoaded",function(){TRACKS.tracksLoaded=true;if(TRACKS.poisLoaded){if(b.state===TRACKS.App.States.SHARE){var d=TRACKS.getUrlHash();if(d&&d.length>0){TRACKS.mask(TRACKS.MASK_ELEMENT);var e=d.substring(1,d.length);var c=TRACKS.DataManager.getInstance().getDataById(e);this.sendMessage("selectDataItemOnMap",c);TRACKS.unmask(TRACKS.MASK_ELEMENT);}}else{TRACKS.DataManager.getInstance().geolocateUser();}}});}});TRACKS.DataManager.getInstance().privateMode=(TRACKS.queryStringParameter("private")=="true")?true:false;b.start();});})(jQuery.noConflict());