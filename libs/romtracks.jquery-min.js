var TRACKS=TRACKS||{};TRACKS.Settings={};TRACKS.useEvents=function(a){TRACKS.mix(M.EventDispatcher,a);};TRACKS.bind=function(a,b){return function(){return a.apply(b||a,arguments);};};TRACKS.mix=function(d,a){var c=a.prototype;a.prototype=new d();a.prototype.constructor=a;for(var b in c){a.prototype[b]=c[b];}};TRACKS.one=function(b,c){var a=jQuery(b);if(c){a=jQuery(c).find(b);}return a[0];};TRACKS.all=function(b,c){var a=jQuery(b);if(c){a=jQuery(c).find(b);}return a;};TRACKS.append=function(a,b){return jQuery(a).append(b);};TRACKS.mask=function(a,b){return jQuery(a).mask(b);};TRACKS.unmask=function(a){return jQuery(a).unmask();};TRACKS.getSelected=function(a){return jQuery(a).find(":selected")[0];};TRACKS.isMasked=function(a){return jQuery(a).isMasked();};TRACKS.wrap=function(a,b){return jQuery(a).wrap(b);};TRACKS.trimString=function(a,b){return a.substring(0,b)+"...";};TRACKS.merge=function(b,a){return jQuery.merge(b,a);};TRACKS.extend=function(b,a){return jQuery.extend(b,a);};TRACKS.ie=function(){var a=0;if(jQuery.browser.msie==true){a=jQuery.browser.version.slice(0,1);}return a;};TRACKS.delegate=function(d,a,b,c){return jQuery(d).delegate(a,b,c);};TRACKS.on=function(a,b,c){return jQuery(a).on(b,c);};TRACKS.css=function(a,c,b){return jQuery(a).css(c,b);};TRACKS.addClass=function(a,b){jQuery(a).addClass(b);};TRACKS.removeClass=function(a,b){jQuery(a).removeClass(b);};TRACKS.hasClass=function(a,b){return jQuery(a).hasClass(b);};TRACKS.decodeHTML=function(a){return jQuery("<div/>").html(a).text();};TRACKS.queryStringParameter=function(b){var a=RegExp("[?&]"+b+"=([^&]*)").exec(window.location.search);return a&&decodeURIComponent(a[1].replace(/\+/g," "));};TRACKS.share=function(i,h,k){k=k||{};var b="";var f="";if(TRACKS.Settings.language){f="&LANGUAGE="+TRACKS.Settings.language;}switch(i.toLowerCase()){case"point":k.sharedField=k.sharedField||"id";k.sharedValue=k.sharedValue||k.point.pointId;b=TRACKS.Settings.shareUrl+"mapurl.html?key="+TRACKS.Settings.key+f+"&customer="+TRACKS.Settings.customer+"&tableName="+TRACKS.Settings.tableName;b=encodeURIComponent(b+"&"+k.sharedField+"="+k.sharedValue);break;case"itinerary":var e="&startAddress="+k.itinerary.startAddress+"&endAddress="+k.itinerary.endAddress+"&endAddressString="+k.itinerary.endAddressString+"&travelMode="+k.itinerary.travelMode;b=TRACKS.Settings.shareUrl+"itineraryurl.html?key="+TRACKS.Settings.key+f+"&customer="+TRACKS.Settings.customer;b=encodeURIComponent(b+e);break;}switch(h.toLowerCase()){case"facebook":b=decodeURIComponent(b);b=encodeURI(b);this.dataManager=TRACKS.DataManager.getInstance();this.dataManager.shortenUrl(b,function(o){var n="660";var p="280";var m=(window.screen.width-n)/2;var l=(window.screen.height-p)/2;window.open("http://www.facebook.com/sharer/sharer.php?u="+o.id+"&t=test",null,"resizable=0,width="+n+",height="+p+",left="+m+",top="+l);});break;case"twitter":b=decodeURIComponent(b);b=encodeURI(b);this.dataManager=TRACKS.DataManager.getInstance();this.dataManager.shortenUrl(b,function(o){var n="660";var p="280";var m=(window.screen.width-n)/2;var l=(window.screen.height-p)/2;window.open("https://twitter.com/share?url="+o.id,null,"resizable=yes,width="+n+",height="+p+",left="+m+",top="+l);});break;case"mail":k.mail=k.mail||{};var c=k.mail.windowWidth||"355";var a=k.mail.windowHeight||"320";var j=(window.screen.width-c)/2;var d=(window.screen.height-a)/2;var f="";if(TRACKS.Settings.language){f="&LANGUAGE="+TRACKS.Settings.language;}var g="email.html?target="+i+f+"&url="+b+"&name="+k.mail.name+"&address="+k.mail.address+"&zip="+k.mail.zip+"&city="+k.mail.city;window.open(g,null,"resizable=0,width="+c+",height="+a+",left="+j+",top="+d);break;}};TRACKS.scrollTop=function(a,b,c,d){jQuery(b).scrollTop(0);jQuery(b).animate({scrollTop:jQuery(c).offset().top-jQuery(a).offset().top-d},{duration:300});};TRACKS.toggle=function(a,b,d,c){jQuery(a).toggle(b,d,c);};TRACKS.fadeToggle=function(a,b,c){jQuery(a).fadeToggle(b,c);};TRACKS.height=function(b,a){jQuery(b).height(a);};TRACKS.width=function(a,b){jQuery(a).width(b);};TRACKS.isString=function(a){return typeof(a)=="string";};TRACKS.stringToBoolean=function(a){if(TRACKS.isString(a)){switch(a.toLowerCase()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":case null:return false;default:return Boolean(a);}}return a;};TRACKS.NumberFormat=function(d,e,a,c){if(!a){d=Math.ceil(Number(d));}else{d=Number(d).toFixed(a);}if(!e){e=" ";}if(!c){c="";}d+="";x=d.split(".");x1=x[0];x2=x.length>1?c+x[1]:"";var b=/(\d+)(\d{3})/;while(b.test(x1)){x1=x1.replace(b,"$1"+e+"$2");}return x1+x2;};TRACKS.openFancyBox=function(a){if(a.length>0){$.fancybox.open(a);}};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(b){var a=this.length>>>0;var c=Number(arguments[1])||0;c=(c<0)?Math.ceil(c):Math.floor(c);if(c<0){c+=a;}for(;c<a;c++){if(c in this&&this[c]===b){return c;}}return -1;};}